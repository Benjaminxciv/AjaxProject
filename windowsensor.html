<html>

    <head>

        <title> Very Scary Prison Inc.</title>
        <meta charset = "UTF-8">
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="custom.css">


    </head>
    <body>

        <div><h1 class='heading'>Very Scary Prison Monitoring</h1></div>
        <nav><b>
            <a href="index.html">Home</a>&nbsp;
            <a href="doorsensor.html">Door Monitor</a>&nbsp;
            <a href="floorsensor.html">Floor Monitor</a>&nbsp;
            <a href="windowsensor.html">Window Monitor</a>&nbsp;
        </b></nav>
        <hr>

        <h2> Window Sensor Interface </h2>
        <form action = "window_server.php">
            <p>Select Window State</p> 
            <input type="radio" name ="windowState" value = "locked" checked> Locked  <br>
            <input type="radio" name ="windowState" value = "closed" > Closed & Unlocked  <br> 
            <input type="radio" name ="windowState" value = "open" > Open <br> <br> 
            <button type = "button" onclick="random_state()">
                    Random Windows State
            </button>
            <br><br> 
            <hr>
            <br>            
            <p>Select Prison Cell</p>
            <input type = "radio" name = "cell" value = "1" checked> Cell 1 <br>
            <input type = "radio" name = "cell" value = "2"> Cell 2 <br>
            <input type = "radio" name = "cell" value = "3"> Cell 3 <br>
            <input type = "radio" name = "cell" value = "4"> Cell 4 <br>
            <input type = "radio" name = "cell" value = "5"> Cell 5
            <br><br>
            <button type = "button"  onclick = "send_window_state(this.form)">
                        Upload to Server
            </button> <br>
          </form>
          <br><br><br><hr>
          <p id="windowStatus1"> This is the part that is updated </p>
          <p id="windowStatus2"> This is the part that is updated </p>
          <p id="windowStatus3"> This is the part that is updated </p>
          <p id="windowStatus4"> This is the part that is updated </p>
          <p id="windowStatus5"> This is the part that is updated </p>
        <script>
        
            function send_window_state(theform) {
                request = new XMLHttpRequest();
                request.open("GET","window_server.php?state="+theform.windowState.value+"&cellNum="+theform.cell.value);

                request.onload = function () {
                    window_callback(theform);
                }
            request.send();
        } 

            function window_callback(theform) {
                
                if (request.status == 200) {
                    if(request.responseText.trim() == 'on')
                    {
                    alert("Warning. The Alarm is on in Cell "+theform.cell.value);
                     }
                     
                document.getElementById("windowStatus1").innerHTML = request.responseText;
                document.getElementById("windowStatus1").style.font = "italic bold 20px arial,serif";
            }

            else if (request.status=404) {
                alert("Server was not found: data returned is :\n"+request.responseText);
            }
        }

        function random_state()
        {
            var array    = document.getElementsByName('windowState');
            var rand_num = Math.floor((Math.random()*3));
            array[rand_num].checked = true;
        }
        </script>
        

    </body>

</html>