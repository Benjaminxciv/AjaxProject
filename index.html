<html>

<body>

<h1 id="my_header"> Prison Sensors</h1>


<form action = "door_server.php" 
  method = "get">
  Select Time 
  <input type = "time" name = "current_time" value = "current_time" >
  <br><br>
  Select Door State
  <br>
  <input type="radio" name ="doorState" value = "locked" checked> Locked  <br>
  <input type="radio" name ="doorState" value = "closed" > Closed & Unlocked  <br> 
  <input type="radio" name ="doorState" value = "open" > Open <br> <br> 
  <br>
  <input type = "radio" name = "cell" value = "1" checked> Cell 1 <br>
  <input type = "radio" name = "cell" value = "2"> Cell 2 <br>
  <input type = "radio" name = "cell" value = "3"> Cell 3 <br>
  <input type = "radio" name = "cell" value = "4"> Cell 4 <br>
  <input type = "radio" name = "cell" value = "5"> Cell 5 &nbsp &nbsp
  <button type = "button"  onclick = "send_door_state(this.form)">
      Upload to Server
  </button>
</form>


<form action = "window_server.php">
  <br>
  Select window state: 
  <br>
  <input type="radio" name ="windowState" value = "locked" checked> Locked  <br>
  <input type="radio" name ="windowState" value = "closed" > Closed & Unlocked  <br> 
  <input type="radio" name ="windowState" value = "open" > Open <br> <br> 
  <input type = "radio" name = "cell" value = "1" checked> Cell 1 <br>
  <input type = "radio" name = "cell" value = "2"> Cell 2 <br>
  <input type = "radio" name = "cell" value = "3"> Cell 3 <br>
  <input type = "radio" name = "cell" value = "4"> Cell 4 <br>
  <input type = "radio" name = "cell" value = "5"> Cell 5 &nbsp &nbsp
  <button type = "button"  onclick = "send_window_state(this.form)">
      Upload to Server
  </button> <br>
</form>

<form action = "floor_server.php">
   <br><br>
   Enter floor weight: <input type="text" name ="floorState" />
   <br><br>
  <input type = "radio" name = "cell" value = "1" checked> Cell 1 <br>
  <input type = "radio" name = "cell" value = "2"> Cell 2 <br>
  <input type = "radio" name = "cell" value = "3"> Cell 3 <br>
  <input type = "radio" name = "cell" value = "4"> Cell 4 <br>
  <input type = "radio" name = "cell" value = "5"> Cell 5 &nbsp &nbsp
  <button type = "button"  onclick = "send_floor_state(this.form)">
      Upload to Server
  </button> <br>
</form>

<button id = "button b" onclick="random_state_generator()">
  Random door/window state
</button>

<button id = "button a" onclick="random_weight_generator()">
  Random weight generator
</button>

<hr>
<h1>Prison Server Response</h1>
<p id="doorStatus"> This is the part that is updated </p>

<p id="windowStatus"> This is the part that is updated </p>
<p id="floorStatus"> This is the part that is updated </p>
<p id= "randomState"> Testing Random Door/Floor State </p>
<p id= "randomWeight"> Testing Random Random Weight </p>

<script type = "text/javascript">

function send_door_state(theform) {
    request = new XMLHttpRequest();
    //Add if theform.doorState.value matches the three options for states
    request.open("GET","door_server.php?state="+theform.doorState.value+"&time="+theform.current_time.value);

    request.onload = function () {
          door_callback();
    }
    request.send();
} 

function door_callback() {

    if (request.status == 200) {
	  document.getElementById("doorStatus").innerHTML = request.responseText;
	  document.getElementById("doorStatus").style.font = "italic bold 20px arial,serif";
    }

    else if (request.status=404) {
	  alert("Server was not found: data returned is :\n"+request.responseText);
    }
}

function send_window_state(theform) {
    request = new XMLHttpRequest();
    request.open("GET","window_server.php?state="+theform.windowState.value+"&cellNum="+theform.cell.value);

    request.onload = function () {
          window_callback();
    }
    request.send();
} 

function window_callback() {

    if (request.status == 200) {
      document.getElementById("windowStatus").innerHTML = request.responseText;
      document.getElementById("windowStatus").style.font = "italic bold 20px arial,serif";
      }

      else if (request.status=404) {
      alert("Server was not found: data returned is :\n"+request.responseText);
      }
}

function send_floor_state(theform) {
    
    var weight = parseFloat(theform.floorState.value);

   if(weight >= 0.00 && weight < 401.00)
    {
    request = new XMLHttpRequest();
    request.open("GET","floor_server.php?inputWeight="+theform.floorState.value+"&cellNum="+theform.cell.value);    
   
    request.onload = function () {
      floor_callback(); 
      }
      request.send();
    }
  else{
    alert("The weight entered is not within the specified range");
  }
} 

function floor_callback() {

    if (request.status == 200) {
      document.getElementById("floorStatus").innerHTML = request.responseText;
      document.getElementById("floorStatus").style.font = "italic bold 20px arial,serif";
      }

    else if (request.status=404) {
      alert("Server was not found: data returned is :\n"+request.responseText);
    }
}

function random_state_generator(){

    var state_num = Math.floor((Math.random()*3)+1) 
    var state_string;
    switch (state_num) {
    case 1:
        state_string = "open";
        break;
    case 2:
        state_string = "locked";
        break;
    case 3:
        state_string = "closed"
    }
   document.getElementById("randomState").innerHTML = "The state is: " + state_string;
}


function random_weight_generator() {
    var precision = 100; // 2 decimals
    var random_num = Math.floor(Math.random() * (400 * precision - 1 * precision) + 0 * precision) / (1*precision);
    document.getElementById("randomWeight").innerHTML = random_num;
}


</script>


</body>
</html>